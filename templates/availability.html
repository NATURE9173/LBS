{% extends "base.html" %}
{% block content %}
<h1>Availability for {{ date }} — {{ location }}</h1>

<table class="grid">
  <thead>
    <tr>
      <th>Lab \ Timeslot</th>
      {% for t in timeslots %}<th>{{ t }}</th>{% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for lab in labs %}
      <tr>
        <td class="lab">{{ lab }}</td>
        {% for t in timeslots %}
          {% set is_taken = (lab, t) in taken %}
          <td class="{{ 'booked' if is_taken else 'free' }}">
            {% if is_taken %}
              Booked
            {% else %}
              <a class="btn" href="{{ url_for('book', date=date, location=location, lab=lab, timeslot=t) }}">Book</a>
            {% endif %}
          </td>
        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>

<h2>Existing bookings</h2>
<ul class="list">
  {% for b in bookings %}
    <li>#{{ b.id }} — {{ b.lab }} @ {{ b.timeslot }} — {{ b.name }} ({{ b.email }})</li>
  {% else %}
    <li>No bookings yet.</li>
  {% endfor %}
</ul>
{% endblock %}
